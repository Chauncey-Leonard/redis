`Redis`是基于内存的数据库，如果不将内存中的数据库状态保存到磁盘，那么一旦服务器进程退出，服务器中的数据库状态也会消失。

#### RDB（Redis DataBase）

在指定的时间间隔内将内存中的数据集快照写入磁盘，也就是Snapshot，它恢复时是将快照文件直接读取到内存中。

Redis会单独创建（fork）一个子进程来进行持久化，会先将数据写入到一个临时的文件中，待持久化过程都结束了，再用这个临时文件替换上次持久化好的文件。整个过程中，主进程是不进行任何IO操作的，这就确保了极高的性能，如果需要进行大规模数据的恢复，且对于数据恢复的完整性不是非常敏感，那RDB方式要比AOF方式更加的高效，RDB的缺点是最后一次持久化后的数据可能会丢失。

**触发机制**

- `save`的规则满足
- 执行了`flushall`
- 退出Redis

备份就会自动生成一个dump.rdb

**恢复rdb文件**

只需要将rdb文件放在我们的redis启动目录就可以，redis启动的时候会自动检查dump.rdb恢复其中的数据

```bash
# 查看目录
config get dir
1) "dir"
2) "/usr/local/bin"
```

如果再这个目录下存在dump.rdb文件，那么启动的时候redis就会自动恢复其中的数据